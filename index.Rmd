---
title: Dashboard
output: 
  flexdashboard::flex_dashboard:
    logo: /capstone/energysiting/data/intermediate_files/energy_logo_dashboard.png
    orientation: rows
    vertical_layout: scroll
    fig_width: 7
    fig_height: 5
    fig_mobile: !expr c(5.5,3.5)
    
---

```{r setup, include=FALSE}
library(flexdashboard)
library(tidyverse)
library(sf)
library(terra)
library(stringr)
library(DT)
library(knitr)

aoi <- read_sf("/capstone/energysiting/data/masks/us_outline/with_states.shp")

########Variables############
path <- "/capstone/energysiting/data"

display <- function(file, legend=TRUE) {
  path_to_file <- file.path(path, file)
  x <- if(grepl(pattern = ".tif", x = file)) {rast(path_to_file)} else {vect(path_to_file)}
  us <- terra::project(vect(aoi), x)
  terra::plot(x, axes = FALSE, alpha = 0, legend = legend)
  terra::plot(us, axes=FALSE, alpha = 0.7, border = "grey", add = TRUE)
  terra::plot(x, axes=FALSE, add = TRUE, legend = legend)
}

display_continuous <- function(file, legend=TRUE, type = "continuous") {
  path_to_file <- file.path(path, file)
  x <- if(grepl(pattern = ".tif", x = file)) {rast(path_to_file)} else {vect(path_to_file)}
  us <- terra::project(vect(aoi), x)
  terra::plot(x, axes = FALSE, alpha = 0, legend = legend, type = type)
  terra::plot(us, axes=FALSE, alpha = 0.7, border = "grey", add = TRUE)
  terra::plot(x, axes=FALSE, add = TRUE, legend = legend, type = type)
}

display_vect <- function(file) {
  path_to_file <- file.path(path, file)
  x <- if(grepl(pattern = ".tif", x = file)) {rast(path_to_file)} else {vect(path_to_file)}
  us <- terra::project(vect(aoi), x)
  terra::plot(us, axes=FALSE, alpha = 0.7, border = "grey")
  terra::plot(x, axes=FALSE, add = TRUE)
}

display_mapview <- function(file, layer_name = "value", legend = TRUE) {
  path_to_file <- file.path(path, file)
  x <- raster::raster(path_to_file)
  mapview::mapView(x, trim = FALSE, layer.name = layer_name, alpha.regions = 0.7, na.color = "transparent", legend = legend)
}

display_mapview_quality <- function(file, layer_name = "value", legend = TRUE) {
  path_to_file <- file.path(path, file)
  x <- raster::raster(path_to_file)
  mapview::mapviewOptions(raster.size=Inf)
  mapview::mapView(x, trim = FALSE, layer.name = layer_name, alpha.regions = 0.7, na.color = "transparent", legend = legend, maxpixels = 2150000, col.regions = rev(terrain.colors(50)))
}

display_mapview_vect <- function(file, zcol = NULL, layer_name = NULL, legend = FALSE) {
  path_to_file <- file.path(path, file)
  x <- read_sf(path_to_file)
  mapview::mapView(x, trim = FALSE, na.color = "transparent", zcol = zcol, layer.name = layer_name, legend = legend)
}

reso <- function(file) {
  path_to_file <- file.path(path, file)
  x <- rast(path_to_file)

  return(paste(x@ptr$res[1], "x", x@ptr$res[2]))
}

extent <- function(file) {
  path_to_file <- file.path(path, file)
  x <- rast(path_to_file)
  return(as.character(terra::ext(x)))
 
}

pro <- function(file) {
  path_to_file <- file.path(path, file)
  x <- rast(path_to_file)
  return(crs(x, proj = TRUE))
 
}

units <- function(file) {
  path_to_file <- file.path(path, file)
  x <- rast(path_to_file)
  value <- (terra::linearUnits(x))
  return(paste(value, "m"))
 
}

type <- function(file) {
  path_to_file <- file.path(path, file)
  x <- if(grepl(pattern = ".tif", x = file)) {rast(path_to_file)} else {vect(path_to_file)}
  if(grepl(pattern = ".tif", x = file)) {return("raster")}
  else {return("vector")}
 
}


dt <- function(file) {
  df <- data.frame(Type = type(file), Extent = extent(file), Projection = pro(file), Resolution = reso(file))
  return(kableExtra::kable(df, align = 'c') %>% kableExtra::kable_classic())
}

display_table <- function(file) {
  path_to_file <- file.path(path, file)
  df <- read_csv(path_to_file)
  DT::datatable(df)
}

files <- list.files(path)

names <- files %>% 
  str_remove_all(pattern = ".tif") %>% 
  str_replace_all(pattern = "_", replacement = " ") %>% 
  str_remove_all(pattern = "qgis")



gwr_path <- "/capstone/energysiting/data/analysis/krige"

display_gwr <- function(file){
  x <- rast(file.path(gwr_path, file))
  us <- terra::project(vect(aoi), x)
  terra::plot(x, axes = FALSE, alpha = 0, legend = TRUE)
  terra::plot(us, axes=FALSE, alpha = 0.7, border = "grey", add = TRUE)
  terra::plot(x, axes=FALSE, add = TRUE, legend = TRUE)
}


```



Overview
========================================
Row {data-height=45}
----------------------------------------
**OVERVIEW**

Row {data-height=65}
----------------------------------------
![](/capstone/energysiting/data/intermediate_files/palmspringslogo6.png){width=440}  

Row
----------------------------------------
### Summary

The decarbonization of energy sources to mitigate climate change is one of the greatest challenges facing the world today. There is significant pressure to achieve the increasingly prevalent, highly ambitious clean energy goals. Even where physical conditions are well suited for renewable energy, there is often significant variation in their potential and their use (Pierce et al., 2021). Limited knowledge exists of the determining factors for successful siting of wind and solar energy projects. Without understanding the relationships between renewable energy development and local or regional siting criteria, clean energy policies could result in unintended consequences or end up being less effective (Wu et al., 2020). Dr. Grace Wu piloted a study predicting energy siting locations in the western United States. The objective of this capstone project is to expand on this previous work and determine the most influential factors for successful siting of utility-scale onshore wind and solar photovoltaics for the contiguous United States (US) through three main objectives:
 
1. Gather and prepare data for each of the factors to be included in the models.  
2. Identify and analyze the relationship of renewable energy siting with these factors.  
3. Generate projection maps of siting favorability for utility-scale wind and solar power plants using statistical techniques and machine learning algorithms.  

To achieve these objectives the team used four processing steps: data gathering and management, creation of a complete raster stack, machine learning analysis, and siting projection map generation.  

Data is stored on the Bren School of Environmental Science & Management server, named Taylor, and code is documented on the energysiting GitHub repository. Upon completion of this project, the data was transferred to the Client for their storage and continued analysis. The team primarily used R for writing and producing code with some Python used in the data gathering process. To complete some calculations QGIS was used. This only occurred when the processing time in R and Python was not efficient for the task. Any areas where QGIS was used are fully documented with details on the decision to use the software and what functions were performed. Data, code, and analysis were tested thoroughly to ensure that full functionality and reproducibility is achieved.  

Among the data was the location data for utility-scale wind and solar. The threshold for utility-scale wind energy was 10 MW and 5 MW for solar. For wind and solar, projects were filtered to only include those from 2017 forward to best align with the time period of the existing dataset for the variables of the analysis. The data for the locations of utility-scale projects is known as presence data. Presence data was made into a raster with the same projection, extent, and resolution as the factors to run the analysis.  
To make models for the analysis, pseudo-absence points were generated. Pseudo-absence points are points where solar and wind are currently not located. These points were generated on a one-to-one scale based on the presence data. The area of each project present was calculated and a pseudo-absence polygon was created of the same area. The Client provided a dataset for both wind and solar called “site suitability”. Site suitability was distinct for each energy technology and provided locations of where wind and solar projects could possibly be sited. Based on the site suitability data, pseudo-absences were randomly distributed within these areas. The data was masked so that a pseudo-absence could not be placed where presence data occurred. Pseudo-absence data was made into a raster with the same projection, extent, and resolution as the variables to run the analysis.  
Once presence and pseudo-absence data were finalized, zonal statistics were calculated for each project. For the purposes of this study, the zonal statistics are the average of each factor's value within the boundaries of the project. Using these averages we were able to analyze the effect of a variable on the project in our models.
Five different modeling techniques were used for the analysis of factors on renewable energy siting. These include logistic regression, random forest, Maxent, Lasso regression, and geographically weighted regression (GWR). GWR was used to understand how a factor’s effect changed across space. All other model types were used to determine the most important siting factors and to generate projection maps of siting suitability. The team chose to use different machine learning methods to analyze which would be the most accurate and be able to compare results between models. 
To make the models the R package “caret” was used. This package allows the use of multiple machine learning algorithms using the same package platform. The package is also used to conduct k-fold cross-validation and to assess the accuracy of the models made for this analysis.  

Row
----------------------------------------
### Problem Statement

Climate change is a growing threat and one of the ways we can mitigate the impacts is through rapid decarbonization of energy sources (Wu et al., 2020). Renewable energy provides a technologically proven pathway to reach decarbonization goals. Studies have shown the need for both wind and solar photovoltaics (PV) to meet decarbonization goals (Williams et al., 2021). Building out these power generation sources can be conflicting with other societal goals such as agricultural production and biodiversity protection. To build sufficient power plants, significant resources are spent by utilities and developers to find suitable areas. However, limited knowledge exists pertaining to the determining factors for successful siting of utility-scale onshore wind and solar PV energy projects. Identifying the most influential determinants of renewable energy siting would inform better electricity system planning, better use of limited resources in the siting of future power plants, and allow for more rapid decarbonization of energy sources. Further, the expansion of renewable energy and the electrification of other areas of society will require a larger capacity than the current electrical infrastructure. Electrical infrastructure can take significantly longer to build compared to renewable energy power plants. A better understanding of successful renewable energy siting can help streamline the planning of necessary electrical infrastructure aiding in the planning of a proactive buildout.  


Row
----------------------------------------
### Specific Objectives

The objective of this capstone project is to expand on the pilot study by Dr. Grace Wu (the Client) and determine the most influential factors for successful siting of utility-scale onshore wind and solar photovoltaics for the contiguous United States (US) through three main objectives:  

1. Gather and prepare data for each of the factors to be included in the models.  
2. Identify and analyze the relationship of renewable energy siting with these factors.  
3. Generate projection maps of siting favorability for utility-scale wind and solar power plants using statistical techniques and machine learning algorithms.  

Row
----------------------------------------
### Testing

Testing Code:  
The scripts used in the project were checked for reproducibility across different operating systems (OS). This includes functions that check for the presence of packages and install them if they are not present on the user’s machine. At each step of data curation and combination, students performed unit testing on intermediate outputs to ensure the data was combined in correct formats allowing for proper functionality. Code review was performed by the team members to ensure the access to code and documentation is preserved after the project.   
 

Testing Data:  
Reviews will be conducted as data is downloaded and used to validate that data aligns with the provided metadata and can guide the analysis as is intended. Data types and structures were tested throughout the code to validate that calculations are being performed on the correct data types. Students ensured there was enough presence/absence data being used in the regression to avoid errors due to row-wise deletion. Any changes made to the datasets to handle gaps will be added to the metadata documentation. There is a built-in test telling users how many observations will be used in a regression to ensure that users are aware of list-wise deletion possibilities.  


Testing Algorithms & Analyses:   
Regressions will be checked to ensure that the respective assumptions are satisfied. We will also test for multicollinearity through examination of the correlation coefficients. We will conduct sanity checks on our machine learning model output to ensure that siting predictions are feasible. For example, predicted locations should not include bodies of water or other excluded areas. The performance of the machine learning models will be tested using the metrics of the Receiver Operator Characteristic Curve and the Area Under the Curve (ROC/AUC). K-fold cross validation was conducted for all the machine learning models using the resampling functionality in the caret package. The current analysis uses 10 folds which is generally considered to be sufficient to reduce significant bias.   


Row
----------------------------------------
### References

Centers for Disease Control. (2021, August 27). CDC/ATSDR Social Vulnerability index. https://www.atsdr.cdc.gov/placeandhealth/svi/data_documentation_download.html  

Earth Resources Observation And Science (EROS) Center. (2018). Shuttle Radar Topography Mission (SRTM) 1 Arc-Second Global [Tiff]. U.S. Geological Survey. https://doi.org/10.5066/F7PR7TFT  

Geofabrik. (2018). North America Open Street Map Data. https://download.geofabrik.de/north-america.html  

Hoen, B., Diffendorfer, J. E., Rand, J., Kramer, L. A., Garrity, C. P., Roper, A. D., & Hunt, H. (2022). United States Wind Turbine Database [Data set]. U.S. Geological Survey. https://doi.org/10.5066/F7TX3DN0  

Kruitwagen, L., Story, K., Friedrich, J., Byers, L., Skillman, S., & Hepburn, C. (2021). A global inventory of solar photovoltaic generating units—Dataset [Data set]. Zenodo. https://doi.org/10.5281/zenodo.5005868  

National Renewable Energy Laboratory. (2021, December). National Solar Radiation Database. https://nsrdb.nrel.gov/data-sets/api-instructions.html  

National Renewable Energy Laboratory. (2022). Wind Toolkit Data Downloads API | NREL: Developer Network. https://developer.nrel.gov/docs/wind/wind-toolkit/  

NC Clean Energy Technology Center. (2022). Database of State Incentives for Renewables & Efficiency®. DSIRE. https://www.dsireusa.org/  

Nolte, C. (2020). Data for: High-resolution land value maps reveal underestimation of conservation costs in the United States (Version 4, p. 299063757 bytes) [Data set]. Dryad. https://doi.org/10.5061/DRYAD.NP5HQBZQ9  

Pierce, J. C., Krause, R. M., Hofmeyer, S. L., & Johnson, B. J. (2021). Explanations for Wind Turbine Installations: Local and Global Environmental Concerns in the Central Corridor of the United States? Energies, 14. https://doi.org/10.3390/en14185830  

Rose, A. N., McKee, J. J., Sims, K. M., Bright, E. A., Reith, A. E., & Urban, M. L. (2020). LandScan 2019 (2019th ed.). Oak Ridge National Laboratory. https://landscan.ornl.gov/  

The Nature Conservancy. (2021). Power of Place Renewable Resource Areas and Environmental Exclusions. https://tnc.maps.arcgis.com/apps/webappviewer/index.html?id=71b0605e44bf475ea55f6d369e668b2c  

U.S. Department of Homeland Security. (2021a, September 30). Electric Substations—Homeland Infrastructure Foundation-Level Data (HIFLD). https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform::electric-substations/explore?location=14.046296,-9.857173,2.94  

U.S. Department of Homeland Security. (2021b, December 23). Electric Power Transmission Lines—Homeland Infrastructure Foundation-Level Data (HIFLD). https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform::electric-power-transmission-lines/about  

Williams, J. H., Jones, R. A., Haley, B., Kwok, G., Hargreaves, J., Farbes, J., & Torn, M. S. (2021). Carbon-Neutral Pathways for the United States. AGU Advances, 2(1), e2020AV000284. https://doi.org/10.1029/2020AV000284  

Wu, G. C., Leslie, E., Sawyerr, O., Cameron, D. R., Brand, E., Cohen, B., Allen, D., Ochoa, M., & Olson, A. (2020). Low-impact land use pathways to deep decarbonization of electricity. Environmental Research Letters, 15(7), 074044. https://doi.org/10.1088/1748-9326/ab87d1  


Row {data-height=45}
----------------------------------------

Row {data-height=45}
----------------------------------------
**The Team**

Row
----------------------------------------
### Students


![](/capstone/energysiting/data/intermediate_files/team2.png)  
(From left) Daniel Kerstan, Paloma Cartwright, Joseph DeCesaro, Desik Somasundaram   




Row
----------------------------------------
### Client


![Grace Wu](/capstone/energysiting/data/intermediate_files/GraceWu.png){width=150px}  
Grace Wu  




Row
----------------------------------------
### Faculty Advisors

![Ranjit Deshmukh](/capstone/energysiting/data/intermediate_files/Ranj.jpg){width=150px}   
Ranjit Deshmukh  


![Allison Horst](/capstone/energysiting/data/intermediate_files/AllisonHorst.png){width=150px}     
Allison Horst





Variables
========================================
Row {data-height=45}
----------------------------------------
**VARIABLES**

Row {.tabset data-height=800}
----------------------------------------
### Env Exclusions
```{r, fig.asp=0.6}
display("processed_data/variables/env_exclusions.tif")
```
```{r}

```


**Environmental Exclusions**  
This dataset was created by The Nature Conservancy examining the environmental constraints and impacts of renewable energy development required to achieve rapid decarbonization goals. Spatial data representing ecological, cultural and agricultural siting criters was used in the compiling of this dataset (The Nature Conservancy, 2021). While the data for the 11 western states is publically available [here](https://tnc.maps.arcgis.com/apps/webappviewer/index.html?id=71b0605e44bf475ea55f6d369e668b2c), the data for the entire continential US was provided by Grace Wu. Please contact her for access to this data. 

```{r}
dt("processed_data/variables/env_exclusions.tif")
```


### Land Acquisition
```{r, fig.asp=0.6}
display("processed_data/variables/land_acquisition.tif")
```
```{r}

```


**Land Acquisition**  
This dataset was created by the PLACES Lab at Boston University. High-resolution maps of estimated fair market value of private properties in the contiguous United States.

As of Nov 9, 2020, these estimates were the best available large-scale predictor for the actual cost of publicly-funded land acquisitions for conservation in the contiguous United States (Nolte, 2020). 

The original dataset is available for download [here](https://datadryad.org/stash/dataset/doi:10.5061/dryad.np5hqbzq9). 
 

```{r}
dt("processed_data/variables/land_acquisition.tif")
```


### Pop Density
```{r, fig.asp=0.6}
path_to_pop <- file.path(path, "processed_data/variables/pop_density.tif")
pop <- if(grepl(pattern = ".tif", x = path_to_pop)) {rast(path_to_pop)} else {vect(path_to_pop)}
pop <- raster::aggregate(pop, 100)
us_pop <- terra::project(vect(aoi), pop)
terra::plot(pop, axes = FALSE, alpha = 0, legend = TRUE)
terra::plot(us_pop, axes=FALSE, alpha = 0.7, border = "grey", add = TRUE)
terra::plot(pop, axes=FALSE, add = TRUE, legend = TRUE, col = rev(grDevices::terrain.colors(1000)))
```
```{r}

```


**Population Density**  (cells aggregated to better show data on the map)  
ORNL’s LandScan is a community standard for global population distribution data. The LandScan Global population distribution is essentially a combination of locally adaptive models that are tailored to match the data conditions and geographical nature of each individual country and region (Rose et al., 2020).

To access the original data, you can follow this [link](https://landscan.ornl.gov/downloads/2019). 

```{r}
dt("processed_data/variables/pop_density.tif")
```


### Roads
```{r, fig.asp=0.6}
display("processed_data/variables/roads_qgis.tif")
```
```{r}

```


**Distance to Roads**  
Euclidian distance to roads, calculated in meters.  
The original roads dataset was compiled using data from Open Street Map but accessed through a PostgreSQL database which provided to the students by a Bren School PhD student. The outputted roads data has been saved as a geopackage and provided to the client. Please contact Grace Wu for access to this data.

```{r}
dt("processed_data/variables/roads_qgis.tif")
```


### RPS
```{r, fig.asp=0.6}
display("processed_data/variables/rps.tif")
```
```{r}

```


**Renewable Portfolio Standards**  
Renewable Portfolio Standards (RPS) require that a specified percentage of the electricity utilities sell comes from renewable resources. States have created these standards to diversify their energy resources, promote domestic energy production and encourage economic development. This dataset contains information of the renewable portfolio standards for each state based on their 2025 goal. For states that did not have a 2025 goal, we chose the nearest target to this.  

This dataset was compiled by students through completion of extensive research and access can be gained through the client, Grace Wu.

```{r}
dt("processed_data/variables/rps.tif")
```


### Slope
```{r, fig.asp=0.6}
display("processed_data/variables/slope.tif")
```
```{r}

```


**Slope**  
This dataset was created by the United States Geological survey and information on its creation can be found [here](https://www.usgs.gov/centers/eros/science/usgs-eros-archive-digital-elevation-shuttle-radar-topography-mission-srtm-1?qt-science_center_objects=0#qt-science_center_objects). The dataset used in our analysis was the SRTM Void Filled data which has additional processing done to address areas of missing data in the slope. 

The data can be accessed through the USGS's [Earth Explorer](http://earthexplorer.usgs.gov/). 
 

```{r}
dt("processed_data/variables/slope.tif")
```


### Solar Capacity
```{r, fig.asp=0.6}
display("processed_data/variables/solar_capacity.tif")
```
```{r}

```


**Solar Capacity Factor (Used only for solar analysis)**  
Capacity Factor is defined as a measure of how much energy is produced by a plant compared with its maximum output (National Renewable Energy Laboratory, 2013). This dataset contains information regarding the solar capacity factor for the entire continential US. It was compiled using a script produced by Grace Wu, the client for this project, which queried the National Renewable Energy Laboratory Database. To obtain this dataset or the script to compile the data yourself, contact Grace Wu.  

```{r}
dt("processed_data/variables/solar_capacity.tif")
```


### Substations
```{r, fig.asp=0.6}
display("processed_data/variables/substations_110_qgis.tif")
```
```{r}

```


**Distance to Electrical Substations**  
Euclidian distance to substations, calculated in meters.  
This feature class/shapefile is for the [Homeland Infrastructure Foundation Level Database (HIFLD)](https://gii.dhs.gov/HIFLD) as well as the Energy modelling and simulation community. This shapefile represents electric power substations primarily associated with electric power transmission. In this layer, substations are considered facilities and equipment that switch, transform, or regulate electric power at voltages equal to, or greater than, 69 kilovolts. The Substations feature class/shapefile includes taps, a location where power on a transmission line is tapped by another transmission line. (Homeland Infrastructure Foundation-Level Data, 2022)

The original dataset can be accessed [here](https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform::electric-substations/about). 



```{r}
dt("processed_data/variables/substations_110_qgis.tif")
```


### SVI overall
```{r, fig.asp=0.6}
display("processed_data/variables/svi_overall.tif")
```
```{r}

```


**Social Vulnerability Index - Overall**  
The dataset used for population demographics for the US was the Agency for Toxic Substances and Disease Registry at the Center for Disease Control's Social Vulnerability. The CDC/ATSDR SVI is a database that helps emergency response planners and public health officials identify, map, and plan support for communities that will most likely need support before, during, and after a public health emergency. The tool is commonly used across CDC/ATSDR, in addition to many emergency preparedness and response organizations. More information about this dataset can be found [here](https://www.atsdr.cdc.gov/placeandhealth/svi/at-a-glance_svi.html).

The original dataset can be accessed [here](https://www.atsdr.cdc.gov/placeandhealth/svi/data_documentation_download.html). 


```{r}
dt("processed_data/variables/svi_overall.tif")
```


### SVI socioeconomic
```{r, fig.asp=0.6}
display("processed_data/variables/svi_socioeconomic.tif")
```
```{r}

```


**Social Vulnerability Index - Socioeconomic**  
The dataset used for population demographics for the US was the Agency for Toxic Substances and Disease Registry at the Center for Disease Control's Social Vulnerability. The CDC/ATSDR SVI is a database that helps emergency response planners and public health officials identify, map, and plan support for communities that will most likely need support before, during, and after a public health emergency. The tool is commonly used across CDC/ATSDR, in addition to many emergency preparedness and response organizations. More information about this dataset can be found [here](https://www.atsdr.cdc.gov/placeandhealth/svi/at-a-glance_svi.html).

The original dataset can be accessed [here](https://www.atsdr.cdc.gov/placeandhealth/svi/data_documentation_download.html). 

```{r}
dt("processed_data/variables/svi_socioeconomic.tif")
```


### SVI unemployment
```{r, fig.asp=0.6}
display("processed_data/variables/svi_unemp.tif")
```
```{r}

```


**Social Vulnerability Index - Unemployment**  
The dataset used for population demographics for the US was the Agency for Toxic Substances and Disease Registry at the Center for Disease Control's Social Vulnerability. The CDC/ATSDR SVI is a database that helps emergency response planners and public health officials identify, map, and plan support for communities that will most likely need support before, during, and after a public health emergency. The tool is commonly used across CDC/ATSDR, in addition to many emergency preparedness and response organizations. More information about this dataset can be found [here](https://www.atsdr.cdc.gov/placeandhealth/svi/at-a-glance_svi.html).

The original dataset can be accessed [here](https://www.atsdr.cdc.gov/placeandhealth/svi/data_documentation_download.html). 

```{r}
dt("processed_data/variables/svi_unemp.tif")
```


### Transmission Lines
```{r, fig.asp=0.6}
display("processed_data/variables/transmission_110_qgis.tif")
```
```{r}

```


**Distance to Transmission Lines**  
Distance to the nearest transmission line calculated in meters.  
This dataset was obtained from the Homeland Infrastructure Foundation Level Database (HIFLD) (https://gii.dhs.gov/HIFLD) as well as the Energy modelling and simulation community. It contains information on electric power transmission lines throughout the US. Transmission Lines are the system of structures, wires, insulators and associated hardware that carry electric energy from one point to another in an electric power system. Underground transmission lines are included where sources were available.

The original dataset can be accessed [here](https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform::electric-power-transmission-lines/about).

```{r}
dt("processed_data/variables/transmission_110_qgis.tif")
```


### Wind Capacity
```{r, fig.asp=0.6}
display("processed_data/variables/wind_capacity.tif")
```
```{r}

```


**Wind Capacity Factor (Used only for wind analysis)**  
Capacity Factor is defined as a measure of how much energy is produced by a plant compared with its maximum output (National Renewable Energy Laboratory, 2013). This dataset contains information regarding the wind capacity factor for the entire continential US. It was compiled using a script produced by Grace Wu, the client for this project, which queried the National Renewable Energy Laboratory Database. To obtain this dataset or the script to compile the data yourself, contact Grace Wu. 

```{r}
dt("processed_data/variables/wind_capacity.tif")
```




### Region- Northeast
```{r, fig.asp=0.6}
display("processed_data/variables/region_ne.tif")
```
```{r}

```


**Northeast Region**  


```{r}
dt("processed_data/variables/region_ne.tif")
```



### Region- Midwest
```{r, fig.asp=0.6}
display("processed_data/variables/region_mw.tif")
```
```{r}

```


**Midwest Region**  


```{r}
dt("processed_data/variables/region_mw.tif")
```




### Region- South
```{r, fig.asp=0.6}
display("processed_data/variables/region_s.tif")
```
```{r}

```


**Southern Region**  


```{r}
dt("processed_data/variables/region_s.tif")
```




### Region- West
```{r, fig.asp=0.6}
display("processed_data/variables/region_w.tif")
```
```{r}

```


**Western Region**  


```{r}
dt("processed_data/variables/region_w.tif")
```



### Region- Mountain West
```{r, fig.asp=0.6}
display("processed_data/variables/region_mtw.tif")
```
```{r}

```


**Mountain West Region**  


```{r}
dt("processed_data/variables/region_mtw.tif")
```



### Region- Texas
```{r, fig.asp=0.6}
display("processed_data/variables/region_tex.tif")
```
```{r}

```


**Texas**  


```{r}
dt("processed_data/variables/region_tex.tif")
```




Locations
========================================
Row {data-height=45}
----------------------------------------
**LOCATIONS**

Row {.tabset data-height=550}
----------------------------------------
### Wind
```{r, fig.asp=0.6}
display_vect("processed_data/existing_wind_solar/wind_hull_existing_pts.shp")
```
```{r}

```



**Existing wind farm locations**  
The United States Wind Turbine Database (USWTDB) provides the locations of land-based and offshore wind turbines in the United States, corresponding wind project information, and turbine technical specifications.  

The data is available for download [here](https://www.sciencebase.gov/catalog/item/6001e327d34e592d8671fae0).



### Wind Interactive
```{r, fig.asp=0.6}
display_mapview_vect("processed_data/existing_wind_solar/wind_hull_existing.shp", zcol = "p_cap", legend = TRUE)
```
```{r}

```


### Wind Mask
```{r, fig.asp=0.6}
display("processed_data/masks/wind_suitability_SL1.tif", legend = FALSE)
```
```{r}

```



**Site Suitability level: SL1**  
Places where absence points can potentially be located


### Wind Absence
```{r, fig.asp=0.6}
display_vect("processed_data/existing_wind_solar/bgPts_wind.shp")
```
```{r}

```



**Pseudo absence points**  
These are points generated in order to conduct the machine learning analysis




Row {.tabset data-height=550}
----------------------------------------
### Solar
```{r, fig.asp=0.6}
display_vect("processed_data/existing_wind_solar/solar_hull_existing_pts.shp")
```
```{r}

```



**Existing solar farm locations**  
This dataset was compiled to by Kruitwagen et. al. to accompany a the paper titled, "A global inventory of solar photovoltaic generating units." 

It can be accessed [here](https://zenodo.org/record/5005868#.YeJOvi-B1Go).



### Solar Interactive
```{r, fig.asp=0.6}
display_mapview_vect("processed_data/existing_wind_solar/solar_hull_existing_pts.shp", zcol = "cpcty_m", legend = TRUE)
```
```{r}

```


### Solar Mask
```{r, fig.asp=0.6}
display("processed_data/masks/solar_suitability_SL1.tif", legend = FALSE)
```
```{r}

```



**Site Suitability level: SL1**  
Places where absence points can potentially be located



### Solar Absence
```{r, fig.asp=0.6}
display_vect("processed_data/existing_wind_solar/bgPts_solar.shp")
```
```{r}

```



**Pseudo absence points**  
These are points generated in order to conduct the machine learning analysis



Wind Analysis
========================================
Row {data-height=45}
----------------------------------------
**WIND ANALYSIS**


Logistic Regression Model Summary {data-height=1000}
----------------------------------------


```{r}
htmltools::includeHTML("/capstone/energysiting/data/analysis/glm1_wind.html")
```
Row {data-height=30}
----------------------------------------


Row {data-height=30}
----------------------------------------
**Model Performance from 10 fold Cross Validation**


Row {.tabset data-height=500}
----------------------------------------
### Performance

![](/capstone/energysiting/data/analysis/windmlperf.png){width=400px}    

### ROC

![](/capstone/energysiting/data/analysis/windmlroc.png){width=400px}    

### Density

![](/capstone/energysiting/data/analysis/windmldensity.png){width=400px}    


Row {data-height=30}
----------------------------------------
**Variable Importance**


Row {.tabset data-height=500}
----------------------------------------
### Logistic Regression

![](/capstone/energysiting/data/analysis/windglmvip.png){width=400px}    

### Random Forest

![](/capstone/energysiting/data/analysis/windrfvip.png){width=400px}    

### Maxent

![](/capstone/energysiting/data/analysis/windmaxentvip.png){width=400px}    

### Lasso

![](/capstone/energysiting/data/analysis/windlassovip.png){width=400px}    


Row {data-height=500}
----------------------------------------
### Correlation Plot (from Logistic Regression)


![](/capstone/energysiting/data/analysis/windcorrplot.png){width=400px}  



Row {data-height=30}
----------------------------------------
**Geographically Weighted Regression Results**

Row {.tabset data-height=500}
----------------------------------------
### Env Exclusions
```{r, fig.asp=0.6}
display_gwr("wind_env_gwr.tif")
```
```{r}

```


**Environmental Exclusions**  



### Substations
```{r, fig.asp=0.6}
display_gwr("wind_sub_gwr.tif")
```
```{r}

```


**Electric Substations**  



### RPS
```{r, fig.asp=0.6}
display_gwr("wind_rps_gwr.tif")
```
```{r}

```


**Renewable Portfolio Standards** 



### Roads
```{r, fig.asp=0.6}
display_gwr("wind_roads_gwr.tif")
```
```{r}

```


**Distance to Roads** 


### Transmission Lines
```{r, fig.asp=0.6}
display_gwr("wind_tx_gwr.tif")
```
```{r}

```


**Distance to Transmission Lines** 



### Pop Density
```{r, fig.asp=0.6}
display_gwr("wind_pop_gwr.tif")
```
```{r}

```


**Population Density** 




### Land Acquisition
```{r, fig.asp=0.6}
display_gwr("wind_landAcq_gwr.tif")
```
```{r}

```


**Land Acquisition Value** 




### Slope
```{r, fig.asp=0.6}
display_gwr("wind_slope_gwr.tif")
```
```{r}

```


**Slope** 


### SVI Unemployment
```{r, fig.asp=0.6}
display_gwr("wind_svi_unemp_gwr.tif")
```
```{r}

```


**Social Vulnerability Index - Unemployment** 




### Wind Capacity
```{r, fig.asp=0.6}
display_gwr("wind_cf_wind_gwr.tif")
```
```{r}

```


**Wind Capacity Factor** 




Wind Prediction
========================================
Row {data-height=45}
----------------------------------------
**WIND PREDICTION**

Row {.tabset data-height=500}
----------------------------------------
### LogReg
```{r, fig.asp=0.6}
display("analysis/logReg_Pred_wind_2017.tif")
```
```{r}

```


**Prediction from Logistic Regression**  



### Random Forest
```{r, fig.asp=0.6}
display_continuous("analysis/randomForest_wind_2017.tif")
```
```{r}

```


**Prediction from Random Forest method**  





### Maxent
```{r, fig.asp=0.6}
display("analysis/Maxent_Pred_wind_2017.tif")
```
```{r}

```


**Prediction from Maxent**  



### Lasso
```{r, fig.asp=0.6}
display("analysis/logReg_Pred_lasso_wind_2017.tif")
```
```{r}

```


**Prediction from Lasso**  


Row {data-height=30}
----------------------------------------
Row {data-height=30}
----------------------------------------
**INTERACTIVE MAP**

Row {data-height=600}
----------------------------------------

### Interactive Prediction Map (Logistic Regression)
```{r, fig.asp=0.6}
display_mapview_quality("analysis/logReg_Pred_wind_2017.tif", layer_name = "LogReg_wind")
```
```{r}

```




Solar Analysis
========================================
Row {data-height=45}
----------------------------------------
**SOLAR ANALYSIS**


Logistic Regression Model Summary {data-height=1000}
----------------------------------------


```{r}
htmltools::includeHTML("/capstone/energysiting/data/analysis/glm1_solar.html")
```
Row {data-height=30}
----------------------------------------

Row {data-height=30}
----------------------------------------
**Model Performance from 10 fold Cross Validation**


Row {.tabset data-height=500}
----------------------------------------
### Performance

![](/capstone/energysiting/data/analysis/solarmlperf.png){width=400px}    

### ROC

![](/capstone/energysiting/data/analysis/solarmlroc.png){width=400px}    

### Density

![](/capstone/energysiting/data/analysis/solarmldensity.png){width=400px}    


Row {data-height=30}
----------------------------------------
**Variable Importance**




Row {.tabset data-height=500}
----------------------------------------
### Logistic Regression

![](/capstone/energysiting/data/analysis/solarglmvip.png){width=400px}    

### Random Forest

![](/capstone/energysiting/data/analysis/solarrfvip.png){width=400px}    

### Maxent

![](/capstone/energysiting/data/analysis/solarmaxentvip.png){width=400px}    

### Lasso

![](/capstone/energysiting/data/analysis/solarlassovip.png){width=400px}    


Row {data-height=500}
----------------------------------------
### Correlation Plot (from Logistic Regression)


![](/capstone/energysiting/data/analysis/solarcorrplot.png){width=400px}  

Row {data-height=30}
----------------------------------------
**Geographically Weighted Regression Results**

Row {.tabset data-height=500}
----------------------------------------
### Env Exclusions
```{r, fig.asp=0.6}
display_gwr("solar_env_gwr.tif")
```
```{r}

```


**Environmental Exclusions**  



### Substations
```{r, fig.asp=0.6}
display_gwr("solar_sub_gwr.tif")
```
```{r}

```


**Electric Substations**  



### RPS
```{r, fig.asp=0.6}
display_gwr("solar_rps_gwr.tif")
```
```{r}

```


**Renewable Portfolio Standards** 



### Roads
```{r, fig.asp=0.6}
display_gwr("solar_roads_gwr.tif")
```
```{r}

```


**Distance to Roads** 


### Transmission Lines
```{r, fig.asp=0.6}
display_gwr("solar_tx_gwr.tif")
```
```{r}

```


**Distance to Transmission Lines** 



### Pop Density
```{r, fig.asp=0.6}
display_gwr("solar_pop_gwr.tif")
```
```{r}

```


**Population Density** 




### Land Acquisition
```{r, fig.asp=0.6}
display_gwr("solar_landAcq_gwr.tif")
```
```{r}

```


**Land Acquisition Value** 




### Slope
```{r, fig.asp=0.6}
display_gwr("solar_slope_gwr.tif")
```
```{r}

```


**Slope** 


### SVI Unemployment
```{r, fig.asp=0.6}
display_gwr("solar_svi_unemp_gwr.tif")
```
```{r}

```


**Social Vulnerability Index - Unemployment** 



### Solar Capacity
```{r, fig.asp=0.6}
display_gwr("solar_cf_solar_gwr.tif")
```
```{r}

```


**Solar Capacity Factor** 



Solar Prediction
========================================
Row {data-height=45}
----------------------------------------
**SOLAR PREDICTION**

Row {.tabset data-height=500}
----------------------------------------
### LogReg
```{r, fig.asp=0.6}
display("analysis/logReg_Pred_solar_2017.tif")
```
```{r}

```


**Prediction from Logistic Regression**  



### Random Forest
```{r, fig.asp=0.6}
display_continuous("analysis/randomForest_solar_2017.tif")
```
```{r}

```


**Prediction from Random Forest method**  





### Maxent
```{r, fig.asp=0.6}
display("analysis/Maxent_Pred_solar_2017.tif")
```
```{r}

```


**Prediction from Maxent**  






### Lasso
```{r, fig.asp=0.6}
display("analysis/logReg_Pred_lasso_solar_2017.tif")
```
```{r}

```


**Prediction from Lasso**  




Row {data-height=30}
----------------------------------------
Row {data-height=30}
----------------------------------------
**INTERACTIVE MAP**


Row {data-height=600}
----------------------------------------
### Interactive Prediction Map (Logistic Regression)
```{r, fig.asp=0.6}
display_mapview_quality("analysis/logReg_Pred_solar_2017.tif", layer_name = "LogReg_solar")
```
```{r}

```

